extends index.pug

block style
  style
    include assets/css/common.css
    include assets/css/patterns.css

block content
  header
    .header_container.container
      nav(aria-label='Main')
        h1.title
          a(title='Fancy Font Text Generator' href='https://fancy-text-generator.com/') 𝔉𝔞𝔫𝔠𝔶 𝔉𝔬𝔫𝔱 𝔗𝔢𝔵𝔱 𝔊𝔢𝔫𝔢𝔯𝔞𝔱𝔬𝔯
        span.myLogo
          a.myLogo(title='Fancy Font Text Generator' href='https://fancy-text-generator.com/')
            img(src='https://fancy-text-generator.com/favicon-76.png' alt=' Fancy Font Text Logo' width='35px' height='35px')
        .icons_wrapper
          a.darkMode(role='button' title='Use light theme' aria-label='Toggle DarkMode')
          button.navbar-toggler.collapsed(type='button' aria-controls='bdNavbar' aria-expanded='false' aria-label='Toggle navigation')
            svg.bi(xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='#fff' viewBox='0 0 16 16')
              path(fill-rule='evenodd' d='M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z')
        #bdNavbar
          ul
            li
              a.darkMode(role='button' title='Use light theme' aria-label='Toggle DarkMode')
            li
              a.underline(href='home.html') Home
            li
              a.underline(href='patterns.html' aria-current='page') Patterns
            li
              a.underline(href='iosEmojis.html') Ios Emojis
            li
              a.underline(href='') Android Emojis
            li
              a.underline(href='unicode.html') Unicode
  .text-area
    .input-container
      .input-wrapper
        i.pen-icon(aria-label='Icon of Pencil')
        input#mytext(placeholder='Your fancy text here' spellcheck="false")
        button.btn-copy
          | Copy All
      button.bd-sidebar-toggler.collapsed(type='button' aria-controls='bd-docs-nav' aria-expanded='true' aria-label='Toggle docs navigation')
        svg.bi.bi-expand(xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='currentColor' viewBox='0 0 16 16')
          title Expand
          path(fill-rule='evenodd' d='M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z')
        svg.bi.bi-collapse(xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='currentColor' viewBox='0 0 16 16')
          title Collapse
          path(fill-rule='evenodd' d='M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z')
  .container-xxl.bd-layout
    aside.bd-sidebar
      nav#bd-patterns-nav(aria-label='Patterns navigation')
        ul.bg-links
          li
            a.category.icon.date.active(href='#dates-content')
              | Dates
          li
            a.category.icon.progress(href='#progress-content') 
              | Progress
          li
            a.category.icon.arrow(href='#holidays-content') 
              | Holidays
          li
            a.category.icon.quotes(href='#quotes-content') 
                | Quotes
    main.bd-main.order-1
      #dates-content.bd-content
        div
          h3 DATES
          #date-input
            label(for='datePicker') Get custom date
            input#datePicker(type='date' value='' data-gramm_editor='false')
        .content-wrapper.copy-area
      #progress-content.bd-content
        h3 PROCESS
        .content-wrapper.copy-area
      #holidays-content.bd-content
        h3 HOLIDAYS
      #quotes-content.bd-content
        h3 QUOTES
        .content-wrapper.copy-area

block scripts 
  script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js")
  script.
    class MacroCommand {
      constructor() {
        this.commandList = [];
      }
      add(command) {
        this.commandList.push(command);
      }
      exceute() {
        for (const command of this.commandList) {
          command.execute();
        }
      }
    }

    const triggerEventsCommand = {
      execute() {
        this.copyTextCommand();
        this.toggleNavBarCommand();
        this.toggleSideBarCommand();
        this.sidebarOnScrollCommand()
        this.updateSideBarCommand();
      },
      copyTextCommand() {
        $(".copy-area").each(function () {
          $(this).on("click", "p", function () {
            copyText($(this).text())
            changeInputVal($(this).text())
            updateCopyTag($(this));

            function updateCopyTag(el) {
              var span = el.parent().find("span");
              span.text("Copied!");

              setTimeout(() => {
                span.text("Click To Copy");
              }, 1200);
            }
          })
        })
        $(".btn-copy").on('click', function () {
          copyText($("#mytext").val())
          updateCopyTag($(this))
          function updateCopyTag(el) {
            el.text("Copied!")
            setTimeout(() => {
              el.text("Copy All")
            }, 1000)
          }
        })
        function changeInputVal(val) {
          var originalval = $("#mytext").val();
          $("#mytext").val(originalval + val);
        }
        function copyText(t) {
          const e = document.createElement("textarea");
          (e.value = t),
            document.body.appendChild(e),
            e.select(),
            document.execCommand("copy"),
            document.body.removeChild(e);
        }
      },
      toggleNavBarCommand() {
        $('.navbar-toggler').click(function () {
          $(this).toggleClass('collapsed')
          if (!$(this).hasClass('collapsed')) {
            // Check if the Sidebar is open
            if ($('.bd-sidebar').hasClass('show')) {
              $('.bd-sidebar').removeClass('show')
            }
            // Toggle navigation
            $('#bdNavbar').addClass('show');
          }
          else {
            $('#bdNavbar').removeClass('show');
          }
        })
      },
      toggleSideBarCommand() {
        $('.bd-sidebar-toggler').click(function () {
          if ($(this).hasClass('collapsed')) {
            $(this).removeClass('collapsed');
            $('.bd-sidebar').addClass('show');
          } else {
            $(this).addClass('collapsed');
            $('.bd-sidebar').removeClass('show');
          }
        })
      },
      sidebarOnScrollCommand() {
        $(window).scroll(function () {
          var scrollTop = $(this).scrollTop();
          wacth($(".bd-content"), $("#bd-patterns-nav .category"));
          wacth($(".sub-content"), $(".collapse-link"));
          // Watch position
          function wacth(element, target) {
            element.each(function () {
              if ($(this).offset().top <= scrollTop + 100) {
                var id = $(this)[0].id;
                target.each(function () {
                  if ($(this).attr("href") === "#" + id) {
                    if (!$(this).hasClass("active")) {
                      target.removeClass("active");
                      $(this).addClass("active");
                    }
                  }
                });
              }
            });
          }
        });
      },
      updateSideBarCommand() {
        $("#bd-patterns-nav .category").on("click", function () {
          var targetid = $(this).attr("href").slice(1);

          //Change the sidebar tags
          clearCls($("#bd-patterns-nav .category"), "active");
          $(this).toggleClass("active");

          // Toggle sidebar
          if ($(".bd-sidebar").hasClass("show")) {
            $(".bd-sidebar").removeClass("show");
            $(".bd-sidebar-toggler").addClass("collapsed");
          }
          // Change the tab
          clearCls($(".bd-content"), "active");
          $(`#${targetid}`).addClass("active");
        });

        $(".collapse-link").on("click", function () {
          clearCls($(".collapse-link"), "active");
          $(this).toggleClass("active");
          // Toggle sidebar
          if ($(".bd-sidebar").hasClass("show")) {
            $(".bd-sidebar").removeClass("show");
            $(".bd-sidebar-toggler").addClass("collapsed");
          }
        });
        function clearCls(el, cls) {
          el.each(function () {
            if ($(this).hasClass(cls)) {
              $(this).removeClass(cls);
            }
          });
        }
      },
    }

    const setTextsCommand = {
      execute() {
        this.getJsonTexts();
        this.setProgressTxts()
        this.setDateTxts()
      },
      getJsonTexts() {
        var setTexts = this.setTexts;
        $.getJSON('../patterns.json', function (data) {
          $.each(data, function (infoIndex, info) {
            // Check if there's subcategories
            if(info['subcategory']){
              jsonToTxts.setSubcategory(info["subcategory"], info['category']);
            }else{
              jsonToTxts.setContent(info['texts'], info['category'])
            }
          })
        })

        const jsonToTxts = {
          setSubcategory(sublist, category) {
            var that = this;
            //- If there's subcategories
            if(Object.prototype.toString.call(sublist) === '[object Array]'){
              $.each(sublist, function(itemindex,item){
                that.setSubSidebar(category, item);
                that.setSubContent(category, item)
              })
            }
          },
          setContent(list, category){
            var $container = $(`#${category}-content`);
            var $contentWrapper = $('<div class="content-wrapper copy-area"></div>');
            $container.append($contentWrapper);
            setTexts(list, $contentWrapper);
          },
          setSubContent(category, item){
            var $container = $(`#${category}-content`)
            var $wrap = $(`<div class="sub-content" id="${category}-${item['id']}"></div>`);
            var $title = $(`<h4 class="sub-title"><span>${item['icon']} </span>${item['name']}</h4>`);
            var $contentWrapper = $('<div class="content-wrapper copy-area"></div>');
            $wrap.append($title, $contentWrapper);
            $container.append($wrap);
            setTexts(item['texts'], $contentWrapper)
          },
          setSubSidebar(category, item){
            var tag = category === "holidays" ? $('.category')[2] : $('.category')[3];
            var existed = $(tag).next().length > 0;
            console.log(existed);
            if(existed){
              var $ul = $(tag).next().children('ul');
            }else{
              var $wrap = $("<div class='collapse'></div>");
              var $ul = $("<ul></ul");
              $wrap.append($ul);
              $(tag).after($wrap);
            }
            var $li = $('<li></li>');
            var $child = $(`<a class="collapse-link" href="#holidays-${item['id']}"></a>`);
            $child.text(item['name']);
            $li.append($child);
            $ul.append($li);
            }
          }
      },
      setProgressTxts() {
        this.setTexts(getProgressTxts(), "#progress-content .copy-area");

        function getProgressTxts() {
          var progressList = [],
            day = new Date();

          progressList.push(todayProgress(day));
          progressList.push(weekProgress(day));
          progressList.push(monthProgress(day));
          progressList.push(yearProgress(day));

          function todayProgress(day) {
            var hours = day.getHours(),
              minuts = day.getMinutes() / 60,
              progressToday = (hours + minuts) / 24;

            return ("𝐓𝐨𝐝𝐚𝐲 " + getDatas(progressToday) + "%");
          }
          function weekProgress(day) {
            var d = day.getDay(),
              progressWeek = d / 7;
            return ("𝐓𝐡𝐢𝐬 𝐖𝐞𝐞𝐤 " + getDatas(progressWeek) + "%");
          }
          function monthProgress(day) {
            var dayCount =
              32 - new Date(day.getYear(), day.getMonth(), 32).getDate() + 1,
              datetoday = day.getDate(),
              progressMonth = datetoday / dayCount;
            return ("𝐓𝐡𝐢𝐬 𝐌𝐨𝐧𝐭𝐡 " + getDatas(progressMonth) + "%");
          }
          function yearProgress(day) {
            var month = day.getMonth(),
              progressYear = month / 12;
            return ("𝐓𝐡𝐢𝐬 𝐘𝐞𝐚𝐫 " + getDatas(progressYear) + "%");
          }

          function getDatas(a) {
            var list = ["▓▓", "░░"],
              n = "𝟎𝟏𝟐𝟑𝟒𝟓𝟔𝟕𝟖𝟗",
              percent = (a * 100).toFixed(1),
              number = Math.round(a * 10);
            return (
              repeat(list[0], number) + repeat(list[1], 10 - number) + " " + percent
            );
          }
          function repeat(str, n) {
            return new Array(n + 1).join(str);
          }

          return progressList;
        }
      },
      setDateTxts() {
        var setTexts = this.setTexts;

        setDefaultDateTxts();
        //  Set the date texts when the user changes the date
        $("#datePicker").on("change", setDateTexts);

        function setDefaultDateTxts() {
          Date.prototype.toDateInputValue = function () {
            var local = new Date(this);
            local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
            return local.toJSON().slice(0, 10);
          };

          $("#datePicker").val(new Date().toDateInputValue());
          setDateTexts();
        }

        // Set Date Texts
        function setDateTexts() {

          var textsList = [];
          var date = $("#datePicker").val(); //'2021-09-30'
          [year, month, day] = date.split("-");
          
          var numberToMonth = {
            "01": "January",
            "02": "February",
            "03": "March",
            "04": "April",
            "05": "May",
            "06": "June",
            "07": "july",
            "08": "August",
            "09": "September",
            '10': "October",
            '11': "November",
            '12': "December",
          };

          function u(t, e) {
            if (!t) return "";
            var test = Number(t);
            if (isNaN(test)) {
              var a = Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");
            } else {
              var a = Array.from("0123456789");
            }
            for (var n = Array.from(e), r = t, i = 0; i < a.length; i++) {
              var o = a[i],
                s = n[i];
              r = r.split(o).join(s);
            }
            return r;
          }
          var getTexts = {
            getPattern1() {
              var font = [
                "𝓪𝓫𝓬𝓭𝓮𝓯𝓰𝓱𝓲𝓳𝓴𝓵𝓶𝓷𝓸𝓹𝓺𝓻𝓼𝓽𝓾𝓿𝔀𝔁𝔂𝔃𝓐𝓑𝓒𝓓𝓔𝓕𝓖𝓗𝓘𝓙𝓚𝓛𝓜𝓝𝓞𝓟𝓠𝓡𝓢𝓣𝓤𝓥𝓦𝓧𝓨𝓩",
                "𝒶𝒷𝒸𝒹𝑒𝒻𝑔𝒽𝒾𝒿𝓀𝓁𝓂𝓃𝑜𝓅𝓆𝓇𝓈𝓉𝓊𝓋𝓌𝓍𝓎𝓏𝒜𝐵𝒞𝒟𝐸𝐹𝒢𝐻𝐼𝒥𝒦𝐿𝑀𝒩𝒪𝒫𝒬𝑅𝒮𝒯𝒰𝒱𝒲𝒳𝒴𝒵",
              ];
              function func(v) {
                return "/" + v + "./";
              };
              function getTexts(font, month, func) {
                var z = [];

                for (var r = 0; r < font.length; r++) {
                  var i = font[r],
                    x = u(month, i),
                    v = func.call(this, x);
                  z.push(v);
                }
                return z;
              }
              return getTexts(font, numberToMonth[month].slice(0,3), func)
            },
            getPattern2() {
              var font1 = [
                "🅰🅱🅲🅳🅴🅵🅶🅷🅸🅹🅺🅻🅼🅽🅾🅿🆀🆁🆂🆃🆄🆅🆆🆇🆈🆉🅰🅱🅲🅳🅴🅵🅶🅷🅸🅹🅺🅻🅼🅽🅾🅿🆀🆁🆂🆃🆄🆅🆆🆇🆈🆉",
                "🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉",
              ];
              var font2 = ["⓿➊➋➌➍➎➏➐➑➒", "⓪①②③④⑤⑥⑦⑧⑨"];

              function getTexts2(font1, font2, month, day) {
                var z = [];

                for (var r = 0; r < font1.length; r++) {
                  var i = font1[r],
                    x = u(month, i) + u(day, font2[r]);
                  z.push(x);
                }
                return z;
              }
              return getTexts2(font1,font2, numberToMonth[month].slice(0,3), day, )
            },
            getPattern3() {
              var font1 = [
                "ᴀʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢᴀʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ",
                "ᴀʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢᴀʙᴄᴅᴇғɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ",
              ];
              var font2 = ["𝟶𝟷𝟸𝟹𝟺𝟻𝟼𝟽𝟾𝟿", "0123456789"];

              function getTexts(font1,font2, month, day) {
                var z = [];

                for (var r = 0; r < font1.length; r++) {
                  var i = font1[r],
                    x = u(month, i) + '.' + u(day, font2[r]);
                  z.push(x);
                }
                return z;
              }
              return getTexts(font1, font2, numberToMonth[month], day)
            },
            getPattern4() {
              var font1 = [
                "𝕒𝕓𝕔𝕕𝕖𝕗𝕘𝕙𝕚𝕛𝕜𝕝𝕞𝕟𝕠𝕡𝕢𝕣𝕤𝕥𝕦𝕧𝕨𝕩𝕪𝕫𝔸𝔹ℂ𝔻𝔼𝔽𝔾ℍ𝕀𝕁𝕂𝕃𝕄ℕ𝕆ℙℚℝ𝕊𝕋𝕌𝕍𝕎𝕏𝕐ℤ",
                "𝐚𝐛𝐜𝐝𝐞𝐟𝐠𝐡𝐢𝐣𝐤𝐥𝐦𝐧𝐨𝐩𝐪𝐫𝐬𝐭𝐮𝐯𝐰𝐱𝐲𝐳𝐀𝐁𝐂𝐃𝐄𝐅𝐆𝐇𝐈𝐉𝐊𝐋𝐌𝐍𝐎𝐏𝐐𝐑𝐒𝐓𝐔𝐕𝐖𝐗𝐘𝐙",
                "𝚊𝚋𝚌𝚍𝚎𝚏𝚐𝚑𝚒𝚓𝚔𝚕𝚖𝚗𝚘𝚙𝚚𝚛𝚜𝚝𝚞𝚟𝚠𝚡𝚢𝚣𝙰𝙱𝙲𝙳𝙴𝙵𝙶𝙷𝙸𝙹𝙺𝙻𝙼𝙽𝙾𝙿𝚀𝚁𝚂𝚃𝚄𝚅𝚆𝚇𝚈𝚉"
              ];
              var font2 = [["𝟘𝟙𝟚𝟛𝟜𝟝𝟞𝟟𝟠𝟡","𝟘𝟙𝟚𝟛𝟜𝟝𝟞𝟟𝟠𝟡"],['0123456789','0123456789'],['⁰¹²³⁴⁵⁶⁷⁸⁹','₀₁₂₃₄₅₆₇₈₉']];

              var weekStr = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']
              var week = weekStr[new Date(date).getDay()-1];
              function getTexts(font1, font2, month, day, week) {
                var z = [];

                for (var r = 0; r < font1.length; r++) {
                  if(day[0] ==='0'){
                    day = day.slice(1);
                  }
                  var x = u(month, font2[r][0]) + '/'+ u(day, font2[r][1]) + ' ' + u(week, font1[r]);
                  z.push(x);
                }
                return z;
              }
              return getTexts(font1, font2, month, day, week)
            },            
            getPattern5() {
              var font1 = ["𝟢𝟣𝟤𝟥𝟦𝟧𝟨𝟩𝟪𝟫", "₀₁₂₃₄₅₆₇₈₉"];

              function getTexts(font1 ,year,month, day) {
                var z = [];

                for (var r = 0; r < font1.length; r++) {
                  var x = u(year, font1[r]) + '.' + u(month, font1[r]) + '.' + u(day, font1[r]);
                  z.push(x);
                }
                return z;
              }
              return getTexts(font1, year, month, day)
            },
          }

          $("#dates-content .copy-area").empty();
          textsList.push(...getTexts.getPattern1());
          textsList.push(...getTexts.getPattern2());
          textsList.push(...getTexts.getPattern3());
          textsList.push(...getTexts.getPattern4());
          textsList.push(...getTexts.getPattern5());
          setTexts(textsList, "#dates-content .copy-area");

        }
      },
      setTexts(v, element) {
        for (var i = 0; i < v.length; i++) {
          var l = $(`<p>${v[i]}</;>`),
            el = $('<div class="item-50 flex-item copy-wrapper"><span class="copy">Click To Copy</span></div>').append(l);
          $(element).append(el)
        }
      }
    }

    const toggleDarkModeCommand = {
      execute() {
        $('.darkMode').click(function () {
          $(this).toggleClass('active');
          $(this).attr('title', "Use dark mode");
          var cl = $("body").toggleClass("dark");
          if ($("body").hasClass('dark')) {
            // Whenever the user explicitly chooses dark mode
            localStorage.theme = 'dark';
          } else {
            //     // Whenever the user explicitly chooses light mode
            localStorage.theme = 'light';
          }
        })

        this.changeStorageData();
      },
      changeStorageData() {
        if (
          localStorage.theme === 'dark'
          || (!('theme' in localStorage)
            && window.matchMedia('(prefers-color-scheme: dark)').matches)
        ) {
          $("body").addClass('dark');
          $('.darkMode').addClass('active');
        } else {
          $("body").removeClass('dark');
        }
      }
    }

    const macroCommand = new MacroCommand();
    macroCommand.add(toggleDarkModeCommand);
    macroCommand.add(triggerEventsCommand);
    macroCommand.add(setTextsCommand);
    macroCommand.exceute();